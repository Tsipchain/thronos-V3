<!DOCTYPE html>
<html>
<head>
  <title>Thronos Network</title>
  <style>
    body {
      background-color: #000;
      color: #0f0;
      font-family: monospace;
      padding: 20px;
    }
    h1 {
      color: #0f0;
      border-bottom: 1px solid #0f0;
      padding-bottom: 10px;
    }
    .stats {
      background: #111;
      padding: 10px;
      margin-top: 20px;
      border: 1px dashed #0f0;
    }
    .highlight {
      color: #ff0;
    }
    .lang-toggle {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #222;
        color: #0f0;
        border: 1px solid #0f0;
        padding: 5px 10px;
        cursor: pointer;
    }
    .lang-en { display: none; }
  </style>
</head>
<body>

<button class="lang-toggle" onclick="toggleLanguage()">GR | EN</button>

<div style="background:#000;padding:10px;border-bottom:1px solid #0f0;text-align:center;">
  <a href="/" style="color:#0f0;margin:10px;">ğŸ  <span class="lang-el">Î‘ÏÏ‡Î¹ÎºÎ®</span><span class="lang-en">Home</span></a>
  <a href="/pledge" style="color:#0f0;margin:10px;">ğŸ”¥ <span class="lang-el">Î”Î­ÏƒÎ¼ÎµÏ…ÏƒÎ·</span><span class="lang-en">Pledge</span></a>
  <a href="/viewer" style="color:#0f0;margin:10px;">ğŸ“¦ <span class="lang-el">Î•Î¾ÎµÏÎµÏ…Î½Î·Ï„Î®Ï‚</span><span class="lang-en">Viewer</span></a>
  <a href="/send" style="color:#0f0;margin:10px;">ğŸ’¸ <span class="lang-el">Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®</span><span class="lang-en">Send</span></a>
  <a href="/wallet" style="color:#0f0;margin:10px;">ğŸ‘› <span class="lang-el">Î Î¿ÏÏ„Î¿Ï†ÏŒÎ»Î¹</span><span class="lang-en">Wallet</span></a>
  <a href="/recovery" style="color:#0f0;margin:10px;">ğŸ› ï¸ <span class="lang-el">Î‘Î½Î¬ÎºÏ„Î·ÏƒÎ·</span><span class="lang-en">Recovery</span></a>
</div>


<h1>ğŸ”¥ <span class="lang-el">ÎšÎ±Î»ÏÏ‚ Î®ÏÎ¸Î±Ï„Îµ ÏƒÏ„Î¿ Î”Î¯ÎºÏ„Ï…Î¿ Thronos</span><span class="lang-en">Welcome to the Thronos Network</span></h1>
<p>
    <span class="lang-el">ÎˆÎ½Î± blockchain Î±Î½Ï„Î¯ÏƒÏ„Î±ÏƒÎ·Ï‚. ÎœÎ¹Î± Î´Î­ÏƒÎ¼ÎµÏ…ÏƒÎ· ÏƒÏ„Î¿ Î¬ÎºÎ±Ï…ÏƒÏ„Î¿.</span>
    <span class="lang-en">A blockchain of resistance. A pledge to the unburnable.</span>
</p>

<div class="stats">
  <h2>ğŸ“ˆ <span class="lang-el">Î–Ï‰Î½Ï„Î±Î½Î¬ Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ Î”Î¹ÎºÏ„ÏÎ¿Ï…</span><span class="lang-en">Live Network Stats</span></h2>
  <pre id="chainInfo"><span class="lang-el">Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î±Î»Ï…ÏƒÎ¯Î´Î±Ï‚...</span><span class="lang-en">Loading chain data...</span></pre>
</div>

<div class="stats">
  <h3>ğŸ’° <span class="lang-el">Î™ÏƒÎ¿Ï„Î¹Î¼Î¯Î±</span><span class="lang-en">Exchange Rate</span></h3>
  <p>1 THR = <span class="highlight">0.0001 BTC</span> (Pegged)</p>
</div>

<script>
function toggleLanguage() {
    const currentLang = localStorage.getItem('lang') || 'el';
    const newLang = currentLang === 'el' ? 'en' : 'el';
    setLanguage(newLang);
}

function setLanguage(lang) {
    localStorage.setItem('lang', lang);
    const elElements = document.querySelectorAll('.lang-el');
    const enElements = document.querySelectorAll('.lang-en');
    
    if (lang === 'el') {
        elElements.forEach(el => el.style.display = 'inline');
        enElements.forEach(el => el.style.display = 'none');
    } else {
        elElements.forEach(el => el.style.display = 'none');
        enElements.forEach(el => el.style.display = 'inline');
    }
}

// Initialize language
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('lang') || 'el';
    setLanguage(savedLang);
});

fetch("/chain")
  .then(res => res.json())
  .then(data => {
    const blocks = data || [];
    const last = blocks[blocks.length - 1] || {};
    const currentLang = localStorage.getItem('lang') || 'el';
    
    const labels = {
        el: {
            total: "Î£ÏÎ½Î¿Î»Î¿ Blocks",
            lastHash: "Hash Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î¿Ï… Block",
            lastMiner: "Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î¿Ï‚ Miner",
            timestamp: "Î§ÏÎ¿Î½Î¹ÎºÎ® Î£Î®Î¼Î±Î½ÏƒÎ·"
        },
        en: {
            total: "Total Blocks",
            lastHash: "Last Block Hash",
            lastMiner: "Last Miner",
            timestamp: "Timestamp"
        }
    };

    // We update the innerHTML dynamically, so we need to handle lang switch for this dynamic content too if we want it perfect, 
    // but for simplicity, we will just render based on current lang load. 
    // A better approach for dynamic content is to have spans with classes.
    
    const renderStats = () => {
        const lang = localStorage.getItem('lang') || 'el';
        const l = labels[lang];
        const html = `
        ${l.total}: <span class="highlight">${blocks.length}</span>\n
        ${l.lastHash}: ${last.block_hash || "N/A"}\n
        ${l.lastMiner}: ${last.miner_btc_address || last.thr_address || "N/A"}\n
        ${l.timestamp}: ${last.timestamp || "N/A"}`;
        document.getElementById("chainInfo").innerHTML = html;
    };

    renderStats();
    
    // Hook into the toggle function to re-render stats
    const originalSetLanguage = setLanguage;
    window.setLanguage = function(lang) {
        originalSetLanguage(lang);
        renderStats();
    };

  })
  .catch(err => {
    document.getElementById("chainInfo").innerText = "Failed to load chain data.";
  });
</script>
</body>
</html>